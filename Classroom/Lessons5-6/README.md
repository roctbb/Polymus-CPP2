# Занятия 5-6: Работа с динамической памятью
## Три типа памяти: статическая, стэк, куча
В оперативной памяти на самом деле существует три механизма выделения памяти:
 - статическая память
 - динамическая память (куча)
 - стэк

В **статической памяти** находятся все глобальные переменные, переменные, помеченные ключевым словом *static* и сам код программы.
 
В **стэке** находятся все переменные, определенные внутри функций, а также параметры функций. Переменные удаляются из стэка в момент закрытия фигурной скобочки, в которой они были созданы.

Память в **куче** выделяется и освобождается в процессе работы программы. Для выделения и освобождения такой памяти используются операции *new* и *delete*. У переменных в динамической памяти нет имен, поэтому для доступа к такой переменной нужно знать ее **адрес**.

**Адрес переменной** в оперативной памяти - это порядковый номер первой ячейки памяти, в которой хранится ее содержимое, записанный в шестнадцатиричной системе счисления.

## Указатели и операции с ними

Для хранения адресов других переменных в С++ существуют специальный тип данных - указатель.

**Указатель** - это переменная, которая содержит в себе адрес другой переменной. Размер любого указателя в 64-битной системе - 64 бита (эквивалентно long long).

```cpp
int* ptr1; // это указатель на переменную типа int
double* ptr2; // это указатель на переменную типа double
Animal* ptr2; // это указатель объект типа Animal
```
Для работы с указателями используются две специальные операции - **переход по указателю** (\*) и **получение адреса переменной** (&). 
```cpp
int a = 10; // это обычная переменная
int* ptr = &a; //это адрес переменной a
cout << ptr; // это 0x7fff57c03acc 
cout << *ptr; // это 10 - значение переменной по адресу ptr - т.е. переменной a
```
### Связь указателей и массивов

На самом деле название любого массива в C++ - это адрес его первой ячейки. Поэтому операция [] эквивалетна прибавлению индекса к адресу (С++ знает тип данных массива и самостоятельно рассчитает правильное число байт) и перехода по этому адреса. Следующие два примера кода работают одинаково:

```cpp
int mas[5] = { 1, 2, 3, 4, 5};
for (int i = 0; i < 5; i++)
    cout << mas[i];
```
```cpp
int mas[5] = {1, 2, 3, 4, 5};
for (int i = 0; i < 5; i++)
    cout << *(mas + i);
```
Именно поэтому, если функция принимает параметром массив, то тип данных ее параметра - это указатель (например *char\** для строки в стиле СИ)

## Работа с динамической памятью

